{"is_source_file": true, "format": "JavaScript", "description": "This is a server-side JavaScript source file implementing an Express backend for a Statement of Work (SOW) generation and chat interface with a language model. It sets up model loading, health checks, chat endpoints (including streaming), and a helper for SOW drafting.", "external_files": ["@llama-node/core", "@llama-node/llama-cpp", "dotenv/config", "express", "cors", "morgan", "nanoid"], "external_methods": ["getLlama", "LlamaModel", "LlamaContext", "LlamaChatSession"], "published": ["app"], "classes": [{"name": "LlamaChatSession", "description": "Represents a chat session with the Llama model, managing system, user, and assistant messages, and handling prompt streaming."}], "methods": [{"name": "initLlama()", "description": "Initializes the Llama model and context asynchronously; loads the model based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "createSessionFromMessages(messages = [])", "description": "Converts an array of message objects into a LlamaChatSession instance, setting up the conversation context.", "scope": "", "scopeKind": ""}, {"name": "buildSystemPrompt()", "description": "Builds the system prompt string for a general-purpose SOW assistant.", "scope": "", "scopeKind": ""}], "calls": ["getLlama", "loadModel", "createContext", "llama.loadModel", "model.createContext", "app.use", "app.get", "app.post", "session.prompt", "session.promptStreaming", "console.log", "console.error"], "search-terms": ["llama-node", "SOW backend", "chat API", "LLM_MODEL_PATH", "SSE", "server.js", "Statement of Work", "model initialization", "Express server"], "state": 2, "file_id": 41, "knowledge_revision": 113, "git_revision": "", "ctags": [{"_type": "tag", "name": "PORT", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^const PORT = process.env.PORT ? Number(process.env.PORT) : 8080;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^const app = express();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildSystemPrompt", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^function buildSystemPrompt() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^let context = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "createSessionFromMessages", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^function createSessionFromMessages(messages = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(messages = [])"}, {"_type": "tag", "name": "initLlama", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^async function initLlama() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "llamaError", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^let llamaError = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "llamaReady", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^let llamaReady = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/sow-generator-platform-17223-17232/backend_express/server.js", "pattern": "/^let model = null;$/", "language": "JavaScript", "kind": "variable"}], "hash": "9f889150783b775f294ddc236b755bf8", "format-version": 4, "code-base-name": "frontend_reactjs", "filename": "backend_express/server.js", "fields": [{"name": "let context = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let llamaError = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let llamaReady = false;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let model = null;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"113": ""}]}